<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AiMA C12 ë¶„ì„ê²°ê³¼ì§€</title>
<style>
/* â”€â”€ Reset & Base â”€â”€ */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --navy: #1B1F3B; --blue: #4A90D9; --purple: #8B6FC0;
  --lg: #F5F6FA; --mg: #E0E3EB; --dg: #6B7280; --text: #1F2937;
  --red: #DC2626; --red-dk: #991B1B; --red-dkr: #7F1D1D;
  --red-bg: #FEF2F2; --red-bd: #FECACA;
  --grn: #059669; --grn-dk: #065F46; --grn-dkr: #064E3B;
  --grn-bg: #F0FDF4; --grn-bd: #BBF7D0;
  --amb-dk: #92400E; --amb-dkr: #78350F; --amb-bg: #FFFBEB; --amb-bd: #FDE68A;
}
body {
  font-family: 'Noto Sans KR', 'NanumSquare', 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
  font-size: 9px;
  background: #dde1e9;
  color: var(--text);
  line-height: 1.4;
}

/* â”€â”€ Floating Controls â”€â”€ */
.controls {
  position: fixed; top: 16px; right: 16px; z-index: 1000;
  display: flex; gap: 8px;
}
.btn {
  padding: 9px 18px; border-radius: 7px; border: none; cursor: pointer;
  font-size: 13px; font-weight: 700; display: flex; align-items: center;
  gap: 6px; transition: all .18s; box-shadow: 0 2px 8px rgba(0,0,0,.18);
}
.btn-pdf  { background: var(--navy); color: #fff; }
.btn-pdf:hover  { background: #262c54; transform: translateY(-1px); }
.btn-back { background: #fff; color: var(--navy); border: 1px solid var(--mg); }
.btn-back:hover { background: var(--lg); }

/* â”€â”€ No-data overlay â”€â”€ */
#no-data {
  display: none; position: fixed; inset: 0; background: #fff;
  z-index: 2000; justify-content: center; align-items: center; flex-direction: column; gap: 16px;
}
#no-data h2 { font-size: 22px; color: var(--navy); }
#no-data p  { font-size: 15px; color: var(--dg); }

/* â”€â”€ A4 Page â”€â”€ */
.page {
  width: 210mm;
  min-height: 297mm;
  margin: 24px auto;
  background: #fff;
  position: relative;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 24px rgba(0,0,0,.18);
  overflow: hidden;
}
.page-body { flex: 1; padding: 0 18mm 10mm; display: flex; flex-direction: column; justify-content: space-evenly; }
.grad-bar  { height: 8px; background: linear-gradient(to right, var(--blue), var(--purple)); }

/* â”€â”€ Page Header â”€â”€ */
.ph {
  padding: 4mm 18mm 2mm;
  display: flex; align-items: center; justify-content: space-between;
  border-bottom: .5px solid var(--mg); margin-bottom: 4mm;
}
.ph-logo { display: flex; align-items: center; gap: 3mm; }
.ph-logo img { height: 12mm; width: auto; }
.ph-title h1 { font-size: 11px; font-weight: 800; color: var(--navy); }
.ph-title p  { font-size: 6px; color: var(--dg); margin-top: .5mm; }
.ph-page { font-size: 7px; color: var(--dg); white-space: nowrap; }

/* â”€â”€ Page Footer â”€â”€ */
.pf {
  border-top: .5px solid var(--mg);
  padding: 2mm 18mm 4mm;
  display: flex; justify-content: space-between; align-items: flex-end;
}
.pf-left p { font-size: 5.5px; color: var(--dg); line-height: 1.7; }
.pf-right  { font-size: 5.5px; font-weight: 700; color: var(--dg); white-space: nowrap; }

/* â”€â”€ Section Title â”€â”€ */
.sec { margin-bottom: 0; flex-shrink: 0; }
.sec-hd { display: flex; align-items: stretch; margin-bottom: 4mm; }
.sec-bar {
  width: 3px; flex-shrink: 0; border-radius: 2px; margin-right: 4px;
  background: linear-gradient(to bottom, var(--blue), var(--purple));
}
.sec-hd h2 { font-size: 11px; font-weight: 800; color: var(--navy); }
.sec-hd p  { font-size: 6.5px; color: var(--dg); margin-top: 1mm; }

/* â”€â”€ Info Table â”€â”€ */
.info-tbl { width: 100%; border-collapse: collapse; }
.info-tbl tr:nth-child(odd) td { background: var(--lg); }
.info-tbl td { padding: 1.8mm 3mm; height: 8mm; font-size: 7px; }
.info-tbl .lbl { font-weight: 700; color: var(--dg); width: 24%; }
.info-tbl .val { color: var(--text); width: 26%; }
.info-meta { font-size: 6.5px; color: var(--dg); margin-top: 1.5mm; padding-left: 3mm; }

/* â”€â”€ Hero â”€â”€ */
.hero {
  border-radius: 4mm; border: 1.5px solid;
  display: flex; align-items: stretch; gap: 4mm;
  min-height: 46mm; margin-bottom: 3mm; overflow: hidden;
}
.hero-accent { width: 4mm; flex-shrink: 0; border-radius: 2mm 0 0 2mm; }
.hero-main { flex: 1; padding: 4mm 0 4mm; }
.hero-main h2 { font-size: 22px; font-weight: 900; margin-bottom: 1.5mm; }
.hero-main h3 { font-size: 10px; font-weight: 700; margin-bottom: 2.5mm; }
.hero-main p  { font-size: 8px; line-height: 1.7; }
.hero-score { min-width: 52mm; flex-shrink: 0; padding: 3mm 4mm 3mm 0; }
.hero-score .slabel { font-size: 7px; font-weight: 700; margin-bottom: 1mm; }
.hero-score .sval   { font-size: 24px; font-weight: 900; }
.hero-score .smax   { font-size: 6.5px; color: var(--dg); margin-left: 1mm; vertical-align: middle; }
.score-bar-bg { height: 3mm; border-radius: 2mm; margin-top: 2mm; overflow: hidden; }
.score-bar-fill { height: 100%; border-radius: 2mm; transition: width .4s; }
.snote { font-size: 6px; color: var(--dg); margin-top: 1.5mm; }

.hero.det   { background: var(--red-bg); border-color: var(--red-bd); }
.hero.det .hero-accent  { background: var(--red); }
.hero.det h2 { color: var(--red); }
.hero.det h3 { color: var(--red-dk); }
.hero.det p  { color: var(--red-dkr); }
.hero.det .slabel { color: var(--red-dk); }
.hero.det .sval   { color: var(--red-dk); }
.hero.det .score-bar-bg  { background: #FEE2E2; }
.hero.det .score-bar-fill { background: var(--red); }

.hero.neg   { background: var(--grn-bg); border-color: var(--grn-bd); }
.hero.neg .hero-accent  { background: var(--grn); }
.hero.neg h2 { color: var(--grn); }
.hero.neg h3 { color: var(--grn-dk); }
.hero.neg p  { color: var(--grn-dkr); }
.hero.neg .slabel { color: var(--grn-dk); }
.hero.neg .sval   { color: var(--grn-dk); }
.hero.neg .score-bar-bg  { background: #D1FAE5; }
.hero.neg .score-bar-fill { background: var(--grn); }

/* â”€â”€ CSO â”€â”€ */
.cso-row {
  display: flex; align-items: center; gap: 3mm;
  height: 12mm; padding: 0 2mm; border-radius: 2mm; margin-bottom: 1.5mm;
}
.cso-row.r1 { background: var(--red-bg); border: .5px solid var(--red-bd); }
.cso-rank {
  width: 7mm; height: 7mm; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 8px; font-weight: 900; color: #fff; flex-shrink: 0;
}
.cso-name { width: 38mm; font-size: 8px; flex-shrink: 0; }
.cso-row.r1 .cso-name { font-weight: 700; }
.cso-bar-wrap { flex: 1; height: 5mm; background: #E5E7EB; border-radius: 2.5mm; overflow: hidden; }
.cso-bar-fill { height: 100%; border-radius: 2.5mm; }
.cso-pct { width: 12mm; font-size: 8px; font-weight: 800; text-align: right; flex-shrink: 0; }
.cso-empty { font-size: 7.5px; color: var(--dg); padding: 3mm 5mm; }

/* â”€â”€ C12 Grid â”€â”€ */
.c12-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 2mm; }
.c12-cell {
  background: var(--lg); border-radius: 2mm;
  padding: 2mm 2.5mm; display: flex; align-items: center;
  gap: 2.5mm; height: 14mm;
}
.c12-dot { width: 4.5mm; height: 4.5mm; border-radius: 50%; flex-shrink: 0; }
.c12-kr  { font-size: 7.5px; font-weight: 700; }
.c12-en  { font-size: 5.5px; color: var(--dg); }

/* â”€â”€ Sub-section heading â”€â”€ */
.sub-hd {
  font-size: 7.5px; font-weight: 700; color: var(--navy);
  margin: 3.5mm 0 2mm 3mm; display: flex; align-items: center; gap: 2mm;
}
.sub-hd::before { content: 'â–¸'; color: var(--blue); }

/* â”€â”€ Data Table â”€â”€ */
.dtbl { width: 100%; border-collapse: collapse; margin-bottom: 2.5mm; }
.dtbl thead tr { background: linear-gradient(to right, var(--navy), #2D3258); }
.dtbl thead th { padding: 2.5mm 2mm; font-size: 6.5px; font-weight: 700; color: #fff; text-align: left; }
.dtbl tbody tr:nth-child(odd) { background: var(--lg); }
.dtbl tbody td { padding: 2mm 2mm; font-size: 6.5px; height: 7.5mm; }
.up, .dn  { color: var(--red); font-weight: 700; }
.ok, .pass { color: var(--grn); font-weight: 700; }
.dash { color: var(--dg); }

/* Composite box */
.comp-box {
  background: #EFF6FF; border: .8px solid var(--blue); border-radius: 2mm;
  padding: 2.5mm 5mm; display: flex; align-items: center;
  justify-content: space-between; margin: 1mm 0 3mm;
}
.comp-box .clabel { font-size: 8px; font-weight: 700; color: var(--navy); }
.comp-box .cval   { font-size: 14px; font-weight: 900; color: var(--red); }

/* â”€â”€ QC â”€â”€ */
.qc-tbl { width: 100%; border-collapse: collapse; }
.qc-tbl tr:nth-child(odd) { background: var(--lg); }
.qc-tbl td { padding: 2mm 3mm; font-size: 6.5px; height: 7.5mm; }
.qc-tbl .qname { color: var(--dg); width: 38%; }
.qc-tbl .qval  { font-weight: 700; width: 20%; }
.qc-tbl .qref  { color: var(--dg); width: 28%; }

/* â”€â”€ Interpretation â”€â”€ */
.interp-box {
  background: var(--lg); border-radius: 3mm;
  padding: 5mm 6mm; margin-bottom: 4mm;
}
.interp-box h4 { font-size: 7.5px; font-weight: 700; color: var(--navy); margin-bottom: 2.5mm; }
.interp-box p  { font-size: 7px; line-height: 1.9; }

/* â”€â”€ Recommendation â”€â”€ */
.rec-box { border-radius: 3mm; border: 1px solid; padding: 4.5mm 6mm; margin-bottom: 4mm; }
.rec-box.det { background: var(--amb-bg); border-color: var(--amb-bd); }
.rec-box.neg { background: var(--grn-bg); border-color: var(--grn-bd); }
.rec-box h4  { font-size: 8px; font-weight: 700; margin-bottom: 2mm; }
.rec-box.det h4 { color: var(--amb-dk); }
.rec-box.neg h4 { color: var(--grn-dk); }
.rec-box ol  { padding-left: 5mm; }
.rec-box li  { font-size: 7px; line-height: 2.4; }
.rec-box.det li { color: var(--amb-dkr); }
.rec-box.neg li { color: var(--grn-dkr); }

/* â”€â”€ Limitations â”€â”€ */
.lim h4 { font-size: 7px; font-weight: 700; color: var(--navy); margin-bottom: 1.5mm; }
.lim .lim-desc { font-size: 6.5px; color: var(--dg); margin-bottom: 1.5mm; line-height: 1.6; }
.lim ul { padding-left: 4mm; }
.lim li { font-size: 6px; color: var(--dg); line-height: 2.2; list-style: disc; }

/* â”€â”€ Signatures â”€â”€ */
.sig-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 7mm; margin-top: 5mm; }
.sig-block p   { font-size: 6px; color: var(--dg); margin-bottom: 1mm; }
.sig-block h5  { font-size: 7px; font-weight: 700; margin-bottom: 3mm; }
.sig-line      { border-top: 1px dashed var(--dg); }

/* â”€â”€ Report Meta â”€â”€ */
.rmeta { font-size: 5.5px; color: var(--dg); margin-top: 5mm; line-height: 2.2; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PRINT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media print {
  *, *::before, *::after {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  @page {
    size: A4 portrait;
    margin: 0;
  }
  /* ë¸Œë¼ìš°ì € ê¸°ë³¸ ë¨¸ë¦¬ê¸€/ë°”ë‹¥ê¸€ ì œê±° */
  html { margin: 0; padding: 0; }
  body { background: #fff !important; margin: 0; padding: 0; }
  .controls, #no-data { display: none !important; }
  .page {
    width: 210mm !important;
    height: 297mm !important;
    min-height: unset !important;
    margin: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    page-break-after: always;
    page-break-inside: avoid;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
  }
  .page:last-child { page-break-after: auto; }
  /* ê·¸ë¼ë””ì–¸íŠ¸Â·ë°°ê²½ ê°•ì œ ì¸ì‡„ */
  .grad-bar { background: linear-gradient(to right, #4A90D9, #8B6FC0) !important; }
  .hero.det  { background-color: #FEF2F2 !important; }
  .hero.neg  { background-color: #F0FDF4 !important; }
  .hero.det .hero-accent { background-color: #DC2626 !important; }
  .hero.neg .hero-accent { background-color: #059669 !important; }
  .dtbl thead tr { background: linear-gradient(to right, #1B1F3B, #2D3258) !important; }
  .interp-box  { background-color: #F5F6FA !important; }
  .rec-box.det { background-color: #FFFBEB !important; }
  .rec-box.neg { background-color: #F0FDF4 !important; }
  .c12-cell    { background-color: #F5F6FA !important; }
  .comp-box    { background-color: #EFF6FF !important; }
  .info-tbl tr:nth-child(odd) td { background-color: #F5F6FA !important; }
  .qc-tbl tr:nth-child(odd) { background-color: #F5F6FA !important; }
  .cso-row.r1 { background-color: #FEF2F2 !important; }
}
</style>
</head>
<body>

<!-- Controls -->
<div class="controls" id="controls">
  <button class="btn btn-back" onclick="location.href='form.html'">â† ìƒˆ ë³´ê³ ì„œ ì‘ì„±</button>
  <button class="btn btn-pdf"  onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„ / PDF ì €ì¥</button>
</div>

<!-- No-data fallback -->
<div id="no-data" style="display:flex;">
  <h2>ë°ì´í„° ì—†ìŒ</h2>
  <p>ì…ë ¥ í¼ì—ì„œ ë¶„ì„ê°’ì„ ë¨¼ì € ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
  <button class="btn btn-pdf" onclick="location.href='form.html'">ì…ë ¥ í¼ìœ¼ë¡œ ì´ë™</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• PAGE 1 â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page1">
  <div class="grad-bar"></div>
  <div class="ph">
    <div class="ph-logo">
      <img src="logo_new.png" alt="AiMA">
      <div class="ph-title">
        <h1>AiMA C12 ë¶„ì„ê²°ê³¼ì§€</h1>
        <p>cfDNA Fragmentomics ê¸°ë°˜ ë‹¤ì¤‘ì•” ì¡°ê¸°ì§„ë‹¨</p>
        <p>Multi-Cancer Early Detection Test Report (12 Cancer Types)</p>
      </div>
    </div>
    <div class="ph-page">Page 1 / 3</div>
  </div>

  <div class="page-body">

    <!-- Â§1 í™˜ì ì •ë³´ -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>í™˜ì ì •ë³´ ë° ê²€ì‚¬ ê°œìš”</h2><p>Patient Information &amp; Test Overview</p></div>
      </div>
      <table class="info-tbl">
        <tr>
          <td class="lbl">í™˜ì ID</td><td class="val" id="pt-id">â€”</td>
          <td class="lbl">ì˜ë¢°ê¸°ê´€</td><td class="val" id="pt-inst">â€”</td>
        </tr>
        <tr>
          <td class="lbl">ì´ë¦„</td><td class="val" id="pt-name">â€”</td>
          <td class="lbl">ì˜ë¢°ì˜</td><td class="val" id="pt-doc">â€”</td>
        </tr>
        <tr>
          <td class="lbl">ìƒë…„ì›”ì¼</td><td class="val" id="pt-dob">â€”</td>
          <td class="lbl">ê²€ì²´ ì ‘ìˆ˜ì¼</td><td class="val" id="pt-col">â€”</td>
        </tr>
        <tr>
          <td class="lbl">ì„±ë³„</td><td class="val" id="pt-sex">â€”</td>
          <td class="lbl">ë³´ê³ ì„œ ë°œí–‰ì¼</td><td class="val" id="pt-rep">â€”</td>
        </tr>
      </table>
      <p class="info-meta">ê²€ì²´ìœ í˜•: í˜ˆì•¡ (Blood)  |  ê²€ì‚¬ëª…: AiMA C12 v1.0  |  ë¶„ì„ë°©ë²•: cfDNA Fragmentomics (WGS)</p>
    </div>

    <!-- Â§2 ê²°ê³¼ ìš”ì•½ -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>ê²€ì‚¬ ê²°ê³¼ ìš”ì•½</h2><p>Test Result Summary</p></div>
      </div>
      <div class="hero" id="hero">
        <div class="hero-accent"></div>
        <div class="hero-main">
          <h2 id="hero-h2">â€”</h2>
          <h3 id="hero-h3">â€”</h3>
          <p id="hero-p1">â€”</p>
          <p id="hero-p2">â€”</p>
        </div>
        <div class="hero-score">
          <div class="slabel">ì•” ì‹ í˜¸ ìŠ¤ì½”ì–´</div>
          <div><span class="sval" id="score-val">â€”</span><span class="smax">/ 1.00</span></div>
          <div class="score-bar-bg"><div class="score-bar-fill" id="score-bar" style="width:0%"></div></div>
          <div class="snote" id="score-note">â€”</div>
        </div>
      </div>
    </div>

    <!-- Â§3 CSO -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>ì•” ì‹ í˜¸ ê¸°ì› ë¶„ì„ â€” CSO Top 3</h2><p>Cancer Signal Origin (Top 3)</p></div>
      </div>
      <div id="cso-wrap"></div>
    </div>

    <!-- Â§4 C12 Grid -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>AiMA C12 ëŒ€ìƒ ì•”ì¢… (12ì¢…)</h2><p>Cancer Types Covered</p></div>
      </div>
      <div class="c12-grid" id="c12-grid"></div>
    </div>

  </div><!-- /page-body -->

  <div class="pf">
    <div class="pf-left">
      <p>ë³¸ ê²€ì‚¬ëŠ” ìŠ¤í¬ë¦¬ë‹ ëª©ì ì´ë©°, ìµœì¢… ì§„ë‹¨ì€ ë°˜ë“œì‹œ ë‹´ë‹¹ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
      <p>AiMA Genomics Inc. | ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152 | Tel: 02-1234-5678 | www.aima-genomics.com</p>
    </div>
    <div class="pf-right">CONFIDENTIAL</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• PAGE 2 â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page2">
  <div class="grad-bar"></div>
  <div class="ph">
    <div class="ph-logo">
      <img src="logo_new.png" alt="AiMA">
      <div class="ph-title">
        <h1>AiMA C12 ë¶„ì„ê²°ê³¼ì§€</h1>
        <p>cfDNA Fragmentomics ê¸°ë°˜ ë‹¤ì¤‘ì•” ì¡°ê¸°ì§„ë‹¨</p>
        <p>Multi-Cancer Early Detection Test Report (12 Cancer Types)</p>
      </div>
    </div>
    <div class="ph-page">Page 2 / 3</div>
  </div>

  <div class="page-body">

    <!-- Â§5 Fragmentomics -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>Fragmentomics ìƒì„¸ ë¶„ì„ ê²°ê³¼</h2><p>cfDNA Fragmentation Feature Analysis</p></div>
      </div>
      <div id="frag-wrap"></div>
    </div>

    <!-- Â§6 QC -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>ê²€ì²´ ë° ì‹œí€€ì‹± í’ˆì§ˆ ì§€í‘œ</h2><p>Quality Control Metrics</p></div>
      </div>
      <table class="qc-tbl" id="qc-tbl">
        <thead><tr style="background:linear-gradient(to right,var(--navy),#2D3258)">
          <th style="padding:1.8mm 3mm;font-size:6.5px;font-weight:700;color:#fff;width:38%">ì§€í‘œ</th>
          <th style="padding:1.8mm 3mm;font-size:6.5px;font-weight:700;color:#fff;width:20%">ì¸¡ì •ê°’</th>
          <th style="padding:1.8mm 3mm;font-size:6.5px;font-weight:700;color:#fff;width:28%">ì°¸ì¡° ë²”ìœ„</th>
          <th style="padding:1.8mm 3mm;font-size:6.5px;font-weight:700;color:#fff;width:14%">íŒì •</th>
        </tr></thead>
        <tbody id="qc-body"></tbody>
      </table>
    </div>

  </div>

  <div class="pf">
    <div class="pf-left">
      <p>ë³¸ ê²€ì‚¬ëŠ” ìŠ¤í¬ë¦¬ë‹ ëª©ì ì´ë©°, ìµœì¢… ì§„ë‹¨ì€ ë°˜ë“œì‹œ ë‹´ë‹¹ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
      <p>AiMA Genomics Inc. | ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152 | Tel: 02-1234-5678 | www.aima-genomics.com</p>
    </div>
    <div class="pf-right">CONFIDENTIAL</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• PAGE 3 â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page3">
  <div class="grad-bar"></div>
  <div class="ph">
    <div class="ph-logo">
      <img src="logo_new.png" alt="AiMA">
      <div class="ph-title">
        <h1>AiMA C12 ë¶„ì„ê²°ê³¼ì§€</h1>
        <p>cfDNA Fragmentomics ê¸°ë°˜ ë‹¤ì¤‘ì•” ì¡°ê¸°ì§„ë‹¨</p>
        <p>Multi-Cancer Early Detection Test Report (12 Cancer Types)</p>
      </div>
    </div>
    <div class="ph-page">Page 3 / 3</div>
  </div>

  <div class="page-body">

    <!-- Â§7 ì„ìƒ í•´ì„ -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>ì„ìƒ í•´ì„ ë° ê¶Œê³ ì‚¬í•­</h2><p>Clinical Interpretation &amp; Recommendations</p></div>
      </div>
      <div class="interp-box">
        <h4>ì„ìƒ í•´ì„</h4>
        <p id="interp-text">â€”</p>
      </div>
      <div class="rec-box" id="rec-box">
        <h4 id="rec-title">ê¶Œê³  ì‚¬í•­</h4>
        <ol id="rec-list"></ol>
      </div>
    </div>

    <!-- Â§8 ì„±ëŠ¥ ì§€í‘œ -->
    <div class="sec">
      <div class="sec-hd">
        <div class="sec-bar"></div>
        <div><h2>ê²€ì‚¬ ì„±ëŠ¥ ì§€í‘œ (ê²€ì¦ ì—°êµ¬ ê¸°ë°˜)</h2><p>Test Performance (Validated)</p></div>
      </div>
      <table class="dtbl">
        <thead><tr>
          <th style="width:45%">ì•”ì¢… / ë³‘ê¸°</th>
          <th style="width:22%">ë¯¼ê°ë„</th>
          <th style="width:22%">íŠ¹ì´ë„</th>
          <th>ë¹„ê³ </th>
        </tr></thead>
        <tbody>
          <tr><td>ì „ì²´ 12ì¢… (Stage Iâ€“IV)</td><td>67.3%</td><td>99.5%</td><td>ë‹¤ê¸°ê´€ ê²€ì¦</td></tr>
          <tr><td>Stage I</td><td>39.1%</td><td class="dash">â€”</td><td>ì¡°ê¸° ë°œê²¬ í•œê³„</td></tr>
          <tr><td>Stage II</td><td>69.8%</td><td class="dash">â€”</td><td></td></tr>
          <tr><td>Stage IIIâ€“IV</td><td>91.2%</td><td class="dash">â€”</td><td></td></tr>
          <tr><td>CSO ì •í™•ë„ (Top 1)</td><td>89.7%</td><td class="dash">â€”</td><td>ê¸°ì› ì¥ê¸° ì˜ˆì¸¡</td></tr>
          <tr><td>CSO ì •í™•ë„ (Top 3)</td><td>97.2%</td><td class="dash">â€”</td><td>ê¸°ì› ì¥ê¸° ì˜ˆì¸¡</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Â§9 í•œê³„ -->
    <div class="sec lim">
      <h4>ê²€ì‚¬ë²• ì„¤ëª… ë° í•œê³„ ê³ ì§€ì‚¬í•­</h4>
      <p class="lim-desc">AiMA C12ëŠ” í˜ˆì•¡ ì† cfDNAì˜ ë‹¨í¸í™” íŒ¨í„´(í¬ê¸° ë¶„í¬, ë‰´í´ë ˆì˜¤ì†œ ìœ„ì¹˜, ë§ë‹¨ ì„œì—´)ì„ AI ëª¨ë¸ë¡œ ë¶„ì„í•˜ì—¬ 12ì¢… ì•”ì„ ì„ ë³„í•˜ëŠ” ê²€ì‚¬ì…ë‹ˆë‹¤.</p>
      <ul>
        <li>ë³¸ ê²€ì‚¬ëŠ” ìŠ¤í¬ë¦¬ë‹(ì„ ë³„) ëª©ì ì´ë©°, í™•ì§„ ê²€ì‚¬ê°€ ì•„ë‹™ë‹ˆë‹¤.</li>
        <li>12ì¢… ì´ì™¸ì˜ ì•”ì¢…ì€ íƒì§€ ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
        <li>ì•” ì‹ í˜¸ ë¯¸ê°ì§€ê°€ ì•”ì˜ ë¶€ì¬ë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ì¡´ ê²€ì§„ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
        <li>ì„ì‹ , ìê°€ë©´ì—­ì§ˆí™˜, ì¥ê¸°ì´ì‹, ìµœê·¼ ìˆ˜í˜ˆ ì´ë ¥ì´ ìˆëŠ” ê²½ìš° ê²°ê³¼ í•´ì„ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>
        <li>Stage I ì•”ì— ëŒ€í•œ ë¯¼ê°ë„ëŠ” ì•½ 39%ì´ë©°, ëª¨ë“  ì¡°ê¸° ì•”ì„ ê°ì§€í•˜ì§€ëŠ” ëª»í•©ë‹ˆë‹¤.</li>
      </ul>
    </div>

    <!-- Â§10 ì„œëª… -->
    <div class="sec" style="border-top:.5px solid var(--mg); padding-top:2mm;">
      <div class="sig-grid" id="sig-grid">
        <div class="sig-block">
          <p>ê²€ì‚¬ ë‹´ë‹¹ì</p><h5 id="sig-analyst">â€”</h5><div class="sig-line"></div>
        </div>
        <div class="sig-block">
          <p>íŒë… ì „ë¬¸ì˜</p><h5 id="sig-reader">â€”</h5><div class="sig-line"></div>
        </div>
        <div class="sig-block">
          <p>ë³´ê³ ì„œ ìŠ¹ì¸</p><h5 id="sig-approver">â€”</h5><div class="sig-line"></div>
        </div>
      </div>
      <div class="rmeta" id="rmeta"></div>
    </div>

  </div>

  <div class="pf">
    <div class="pf-left">
      <p>ë³¸ ê²€ì‚¬ëŠ” ìŠ¤í¬ë¦¬ë‹ ëª©ì ì´ë©°, ìµœì¢… ì§„ë‹¨ì€ ë°˜ë“œì‹œ ë‹´ë‹¹ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
      <p>AiMA Genomics Inc. | ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152 | Tel: 02-1234-5678 | www.aima-genomics.com</p>
    </div>
    <div class="pf-right">CONFIDENTIAL</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• JavaScript â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
const C12 = [
  { kr:'í',      en:'Lung',         color:'#3B82F6' },
  { kr:'ì·Œì¥',    en:'Pancreatic',   color:'#8B5CF6' },
  { kr:'ìœ„',      en:'Gastric',      color:'#F59E0B' },
  { kr:'ì „ë¦½ì„ ',  en:'Prostate',     color:'#06B6D4' },
  { kr:'ìœ ë°©',    en:'Breast',       color:'#EC4899' },
  { kr:'ë‹´ë„ê³„',  en:'Biliary',      color:'#10B981' },
  { kr:'ëŒ€ì¥',    en:'Colorectal',   color:'#EF4444' },
  { kr:'ì‹ ì¥',    en:'Renal',        color:'#F97316' },
  { kr:'ì‹ë„',    en:'Esophageal',   color:'#EAB308' },
  { kr:'ìê¶ë‚´ë§‰',en:'Endometrial',  color:'#14B8A6' },
  { kr:'ë‚œì†Œ',    en:'Ovarian',      color:'#A855F7' },
  { kr:'ê°„',      en:'Liver',        color:'#78716C' },
];

const QC_REFS = {
  bloodVol:   { name:'í˜ˆì¥ëŸ‰',             unit:'mL',   ref:'â‰¥ 4.0 mL',    pass: v => v >= 4.0 },
  cfDNAConc:  { name:'cfDNA ë†ë„',         unit:'ng/mL',ref:'4â€“50 ng/mL',  pass: v => v >= 4 && v <= 50 },
  seqDepth:   { name:'ì‹œí€€ì‹± ê¹Šì´ (WGS)',  unit:'Ã—',    ref:'â‰¥ 3.0Ã—',      pass: v => v >= 3.0 },
  q30:        { name:'Q30 ë¹„ìœ¨',           unit:'%',    ref:'â‰¥ 85%',       pass: v => v >= 85 },
  mappingRate:{ name:'ë§¤í•‘ë¥  (Mapping Rate)',unit:'%',  ref:'â‰¥ 95%',       pass: v => v >= 95 },
  gdnaContam: { name:'gDNA ì˜¤ì—¼ë„',        unit:'%',    ref:'< 5%',        pass: v => v < 5 },
  effReads:   { name:'ìœ íš¨ ë¦¬ë“œ ìˆ˜',        unit:'M',    ref:'â‰¥ 200M',      pass: v => v >= 200 },
};

function $(id) { return document.getElementById(id); }
function set(id, val) { const e = $(id); if(e) e.textContent = val; }

function renderC12Grid(detectedOrgans) {
  const grid = $('c12-grid');
  grid.innerHTML = '';
  C12.forEach(c => {
    const isHit = detectedOrgans && detectedOrgans.some(o => o.includes(c.kr));
    const cell = document.createElement('div');
    cell.className = 'c12-cell';
    if(isHit) cell.style.cssText = 'border: 1.5px solid #DC2626; background:#FEF2F2;';
    cell.innerHTML = `
      <div class="c12-dot" style="background:${c.color}"></div>
      <div><div class="c12-kr">${c.kr}</div><div class="c12-en">${c.en}</div></div>`;
    grid.appendChild(cell);
  });
}

function renderCSO(cso, detected) {
  const wrap = $('cso-wrap');
  if (!detected) {
    wrap.innerHTML = `
      <div style="background:#F0FDF4;border:1px solid #BBF7D0;border-radius:3mm;padding:4mm 5mm;">
        <div style="font-size:8.5px;font-weight:800;color:#065F46;margin-bottom:2.5mm;">
          âœ“ ì•” ì‹ í˜¸ ë¯¸ê°ì§€ â€” CSO ë¶„ì„ í•´ë‹¹ ì—†ìŒ
        </div>
        <p style="font-size:7px;color:#064E3B;line-height:1.85;margin-bottom:3.5mm;">
          ì•” ì‹ í˜¸ê°€ ê°ì§€ë˜ì§€ ì•Šì•„ ê¸°ì› ì¥ê¸° ë¶„ì„(CSO)ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
          CSO ë¶„ì„ì€ ì•” ì‹ í˜¸ ìŠ¤ì½”ì–´ â‰¥ 0.50ì¸ ê²½ìš°ì—ë§Œ ìµœëŒ€ 3ê°œ ê¸°ì› ì¥ê¸°ë¥¼ ì˜ˆì¸¡í•˜ì—¬ ë³´ê³ í•©ë‹ˆë‹¤.
        </p>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:2.5mm;">
          <div style="background:#fff;border-radius:2mm;padding:3mm 3.5mm;border:.8px solid #BBF7D0;">
            <div style="font-size:7px;font-weight:700;color:#065F46;margin-bottom:1.5mm;">ë¶„ì„ ì›ë¦¬</div>
            <div style="font-size:6.5px;color:#047857;line-height:1.75;">cfDNA ë‹¨í¸í™” íŒ¨í„´ì„ 12ê°œ ì¥ê¸° ê¸°ì¤€ í”„ë¡œíŒŒì¼ê³¼ ë¹„êµí•˜ì—¬ ê¸°ì› ì¥ê¸°ë¥¼ í™•ë¥ ë¡œ ì˜ˆì¸¡í•©ë‹ˆë‹¤.</div>
          </div>
          <div style="background:#fff;border-radius:2mm;padding:3mm 3.5mm;border:.8px solid #BBF7D0;">
            <div style="font-size:7px;font-weight:700;color:#065F46;margin-bottom:1.5mm;">ë³´ê³  ê¸°ì¤€</div>
            <div style="font-size:6.5px;color:#047857;line-height:1.75;">ì•” ì‹ í˜¸ ìŠ¤ì½”ì–´ê°€ ì„ê³„ê°’(0.50) ë¯¸ë§Œì¸ ê²½ìš° CSO ë¶„ì„ ê²°ê³¼ëŠ” ì„ìƒì  ì˜ë¯¸ê°€ ì—†ì–´ ë³´ê³ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
          </div>
          <div style="background:#fff;border-radius:2mm;padding:3mm 3.5mm;border:.8px solid #BBF7D0;">
            <div style="font-size:7px;font-weight:700;color:#065F46;margin-bottom:1.5mm;">CSO ì •í™•ë„</div>
            <div style="font-size:6.5px;color:#047857;line-height:1.75;">Top-1 ì •í™•ë„ 89.7%, Top-3 ì •í™•ë„ 97.2% (ê²€ì¦ ì—°êµ¬ ê¸°ë°˜, n=120,000)</div>
          </div>
        </div>
      </div>`;
    return;
  }
  const rankColors = ['#DC2626','#F59E0B','#8B5CF6'];
  wrap.innerHTML = '';
  cso.slice(0,3).forEach((item, i) => {
    const row = document.createElement('div');
    row.className = `cso-row${i===0?' r1':''}`;
    row.innerHTML = `
      <div class="cso-rank" style="background:${rankColors[i]}">${i+1}</div>
      <div class="cso-name">${item.organ}</div>
      <div class="cso-bar-wrap">
        <div class="cso-bar-fill" style="width:${item.prob}%;background:${rankColors[i]}"></div>
      </div>
      <div class="cso-pct" style="color:${rankColors[i]}">${item.prob}%</div>`;
    wrap.appendChild(row);
  });
}

function renderFragDet(frag) {
  const wrap = $('frag-wrap');
  const rows1 = [
    ['ì¤‘ê°„ ë‹¨í¸ ê¸¸ì´ (Median)', frag.medianLen+' bp', '160â€“170 bp', frag.medianLen < 160 ? 'up':'ok', frag.medianLen < 160 ? 'â–² ë‹¨ì¶•':'ì •ìƒ'],
    ['ë‹¨í¸ ê¸¸ì´ ë¹„ìœ¨ (Short/Long)', frag.slRatio, '0.15â€“0.25', frag.slRatio > 0.25 ? 'up':'ok', frag.slRatio > 0.25 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
    ['ë‹¨í¸ ê¸¸ì´ ì—”íŠ¸ë¡œí”¼', frag.entropy, '3.20â€“3.50', frag.entropy > 3.50 ? 'up':'ok', frag.entropy > 3.50 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
    ['167bp í”¼í¬ ë¹„ìœ¨', frag.peak167, '0.42â€“0.55', frag.peak167 < 0.42 ? 'dn':'ok', frag.peak167 < 0.42 ? 'â–¼ ê°ì†Œ':'ì •ìƒ'],
  ];
  const rows2 = [
    ['TSS ì»¤ë²„ë¦¬ì§€ ìŠ¤ì½”ì–´', frag.tssCov, '0.30â€“0.50', frag.tssCov > 0.50 ? 'up':'ok', frag.tssCov > 0.50 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
    ['ì¡°ì§ íŠ¹ì´ì  ì‹ í˜¸ (Top 1)', frag.tissueSignal, 'â€”', 'dash', 'â€”'],
    ['í”„ë¡œëª¨í„° ì ‘ê·¼ì„± ì§€ìˆ˜', frag.promoterIdx, '1.00â€“1.60', frag.promoterIdx > 1.60 ? 'up':'ok', frag.promoterIdx > 1.60 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
  ];
  const rows3 = [
    ['4-mer ëª¨í‹°í”„ ë‹¤ì–‘ì„±', frag.motifDiv+' / 256', '230â€“250', frag.motifDiv < 230 ? 'dn':'ok', frag.motifDiv < 230 ? 'â–¼ ê°ì†Œ':'ì •ìƒ'],
    ['CCCA ëª¨í‹°í”„ ë¹ˆë„', frag.cccaFreq+'%', '1.5â€“2.5%', frag.cccaFreq > 2.5 ? 'up':'ok', frag.cccaFreq > 2.5 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
    ['ëª¨í‹°í”„ ë¶ˆê· í˜• ìŠ¤ì½”ì–´ (MDS)', frag.mds, '0.00â€“0.35', frag.mds > 0.35 ? 'up':'ok', frag.mds > 0.35 ? 'â–² ìƒìŠ¹':'ì •ìƒ'],
  ];
  const rows4 = [
    ['ë‹¨í¸ ê¸¸ì´ í”„ë¡œíŒŒì¼', frag.scoreSize, '40%', (frag.scoreSize*0.40).toFixed(3)],
    ['ë‰´í´ë ˆì˜¤ì†œ í’‹í”„ë¦°íŠ¸', frag.scoreNuc,  '35%', (frag.scoreNuc*0.35).toFixed(3)],
    ['ë§ë‹¨ ì„œì—´ ëª¨í‹°í”„', frag.scoreMotif,'25%', (frag.scoreMotif*0.25).toFixed(3)],
  ];
  const composite = (frag.scoreSize*0.40 + frag.scoreNuc*0.35 + frag.scoreMotif*0.25).toFixed(3);

  function buildTable(headers, rows) {
    const ths = headers.map(h=>`<th>${h}</th>`).join('');
    const trs = rows.map(r => {
      const cls4 = r[3] ? `class="${r[3]}"` : '';
      return `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td ${cls4}>${r[4]}</td></tr>`;
    }).join('');
    return `<table class="dtbl"><thead><tr>${ths}</tr></thead><tbody>${trs}</tbody></table>`;
  }

  wrap.innerHTML = `
    <p class="sub-hd">ë‹¨í¸ ê¸¸ì´ í”„ë¡œíŒŒì¼ (Fragment Size Profile)</p>
    ${buildTable(['ì§€í‘œ','ì¸¡ì •ê°’','ì°¸ì¡° ë²”ìœ„','íŒì •'], rows1)}
    <p class="sub-hd">ë‰´í´ë ˆì˜¤ì†œ í’‹í”„ë¦°íŠ¸ (Nucleosome Footprint)</p>
    ${buildTable(['ì§€í‘œ','ì¸¡ì •ê°’','ì°¸ì¡° ë²”ìœ„','íŒì •'], rows2)}
    <p class="sub-hd">ë§ë‹¨ ì„œì—´ ëª¨í‹°í”„ (End Motif Pattern)</p>
    ${buildTable(['ì§€í‘œ','ì¸¡ì •ê°’','ì°¸ì¡° ë²”ìœ„','íŒì •'], rows3)}
    <p class="sub-hd">ì¢…í•© í”¼ì²˜ ìŠ¤ì½”ì–´ (Composite Feature Score)</p>
    ${buildTable(['í”¼ì²˜ ë²”ì£¼','ê°œë³„ ìŠ¤ì½”ì–´','ê°€ì¤‘ì¹˜','ê¸°ì—¬ë„'], rows4)}
    <div class="comp-box">
      <span class="clabel">ì¢…í•© ì•” ì‹ í˜¸ ìŠ¤ì½”ì–´ (Cancer Score)</span>
      <span class="cval">${composite}</span>
    </div>`;
}

function renderFragNeg(frag, score) {
  const wrap = $('frag-wrap');
  const rows = [
    ['cfDNA ë†ë„',                frag.cfDNAConc+' ng/mL', '4â€“50 ng/mL', 'ok', 'ì •ìƒ'],
    ['ì¤‘ê°„ ë‹¨í¸ ê¸¸ì´ (Median)',    frag.medianLen+' bp',    '160â€“170 bp', frag.medianLen >= 160 && frag.medianLen <= 170 ? 'ok':'up', frag.medianLen >= 160 && frag.medianLen <= 170 ? 'ì •ìƒ':'ì´ìƒ'],
    ['ë‹¨í¸ ê¸¸ì´ ë¹„ìœ¨ (Short/Long)',frag.slRatio,            '0.15â€“0.25',  frag.slRatio >= 0.15 && frag.slRatio <= 0.25 ? 'ok':'up', frag.slRatio >= 0.15 && frag.slRatio <= 0.25 ? 'ì •ìƒ':'ì´ìƒ'],
    ['TSS ì»¤ë²„ë¦¬ì§€ ìŠ¤ì½”ì–´',        frag.tssCov,             '0.30â€“0.50',  frag.tssCov >= 0.30 && frag.tssCov <= 0.50 ? 'ok':'up', frag.tssCov >= 0.30 && frag.tssCov <= 0.50 ? 'ì •ìƒ':'ì´ìƒ'],
    ['ëª¨í‹°í”„ ë¶ˆê· í˜• ìŠ¤ì½”ì–´ (MDS)', frag.mds,                '0.00â€“0.35',  frag.mds <= 0.35 ? 'ok':'up', frag.mds <= 0.35 ? 'ì •ìƒ':'ì´ìƒ'],
    ['ì¢…í•© ì•” ì‹ í˜¸ ìŠ¤ì½”ì–´',        score,                   '< 0.50',     'ok', 'ì •ìƒ'],
  ];
  const ths = ['ì§€í‘œ','ì¸¡ì •ê°’','ì°¸ì¡° ë²”ìœ„','íŒì •'].map(h=>`<th>${h}</th>`).join('');
  const trs = rows.map(r => `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td class="${r[3]}">${r[4]}</td></tr>`).join('');
  wrap.innerHTML = `
    <p style="font-size:7.5px;color:var(--dg);padding:0 0 2.5mm 5mm">
      ì•” ì‹ í˜¸ê°€ ê°ì§€ë˜ì§€ ì•Šì•„ ìƒì„¸ í”¼ì²˜ ë¶„ì„ ê²°ê³¼ë¥¼ ë³„ë„ í‘œê¸°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì£¼ìš” ë‹¨í¸í™” ì§€í‘œëŠ” ëª¨ë‘ ì •ìƒ ë²”ìœ„ ë‚´ì…ë‹ˆë‹¤.</p>
    <p class="sub-hd">cfDNA ë‹¨í¸í™” ê¸°ë³¸ í”„ë¡œíŒŒì¼</p>
    <table class="dtbl"><thead><tr>${ths}</tr></thead><tbody>${trs}</tbody></table>
    <p class="sub-hd" style="margin-top:4mm;">Fragmentomics ë¶„ì„ ë°©ë²•ë¡ </p>
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:2.5mm;">
      <div style="background:#EFF6FF;border-radius:3mm;padding:4mm 4.5mm;border:.8px solid #BFDBFE;">
        <div style="font-size:8px;font-weight:800;color:#1E40AF;margin-bottom:2mm;">â‘  Fragment Size Profile</div>
        <div style="font-size:6.5px;font-weight:700;color:#1E3A8A;margin-bottom:1.5mm;">ë‹¨í¸ ê¸¸ì´ ë¶„í¬ ë¶„ì„</div>
        <div style="font-size:6px;color:#1D4ED8;line-height:1.8;">ì•”ì„¸í¬ ìœ ë˜ cfDNAëŠ” ë‰´í´ë ˆì˜¤ì†œ ì¬ë°°ì¹˜ë¡œ ì¸í•´ ì •ìƒ ì„¸í¬ë³´ë‹¤ ì§§ì€ ë‹¨í¸ ê¸¸ì´(< 160bp)ë¥¼ ë³´ì…ë‹ˆë‹¤. ë‹¨í¸ ê¸¸ì´ ë¹„ìœ¨(Short/Long), ê¸¸ì´ ì—”íŠ¸ë¡œí”¼, 167bp í”¼í¬ ë¹„ìœ¨ì„ ë³µí•© ë¶„ì„í•˜ì—¬ ì•” ì‹ í˜¸ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.</div>
      </div>
      <div style="background:#F5F3FF;border-radius:3mm;padding:4mm 4.5mm;border:.8px solid #DDD6FE;">
        <div style="font-size:8px;font-weight:800;color:#5B21B6;margin-bottom:2mm;">â‘¡ Nucleosome Footprint</div>
        <div style="font-size:6.5px;font-weight:700;color:#4C1D95;margin-bottom:1.5mm;">ë‰´í´ë ˆì˜¤ì†œ ìœ„ì¹˜ ì‹ í˜¸ ë¶„ì„</div>
        <div style="font-size:6px;color:#6D28D9;line-height:1.8;">ë‰´í´ë ˆì˜¤ì†œì´ ë³´í˜¸í•˜ëŠ” DNA êµ¬ê°„ì€ ë‰´í´ë ˆì•„ì œë¡œë¶€í„° ë³´ì¡´ë˜ì–´ cfDNA ë‹¨í¸ ëì ì˜ ìœ„ì¹˜ ë¶„í¬ì— íŒ¨í„´ì„ ë‚¨ê¹ë‹ˆë‹¤. ì „ì‚¬ ì‹œì‘ì (TSS) ì£¼ë³€ ì»¤ë²„ë¦¬ì§€ì™€ í”„ë¡œëª¨í„° ì ‘ê·¼ì„± ì§€ìˆ˜ê°€ ì•”ì„¸í¬ íŠ¹ì´ì  ì‹ í˜¸ë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.</div>
      </div>
      <div style="background:#FFF7ED;border-radius:3mm;padding:4mm 4.5mm;border:.8px solid #FED7AA;">
        <div style="font-size:8px;font-weight:800;color:#92400E;margin-bottom:2mm;">â‘¢ End Motif Pattern</div>
        <div style="font-size:6.5px;font-weight:700;color:#78350F;margin-bottom:1.5mm;">ë§ë‹¨ ì„œì—´ ëª¨í‹°í”„ ë¶„ì„</div>
        <div style="font-size:6px;color:#B45309;line-height:1.8;">cfDNA ë‹¨í¸ ì–‘ ë 4-mer ì„œì—´ 256ê°€ì§€ì˜ ë¹ˆë„ ë¶„í¬ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤. ì•” í™˜ìì—ì„œëŠ” íŠ¹ì • ëª¨í‹°í”„(CCCA ë“±)ì˜ ë¹„ì •ìƒì  ì¦ê°€ì™€ ì „ì²´ ëª¨í‹°í”„ ë‹¤ì–‘ì„± ê°ì†Œê°€ ê´€ì°°ë˜ë©°, ì´ë¥¼ ëª¨í‹°í”„ ë¶ˆê· í˜• ìŠ¤ì½”ì–´(MDS)ë¡œ ì •ëŸ‰í™”í•©ë‹ˆë‹¤.</div>
      </div>
    </div>`;
}

function renderQC(qc) {
  const tbody = $('qc-body');
  const keys = Object.keys(QC_REFS);
  tbody.innerHTML = keys.map((k, i) => {
    const ref = QC_REFS[k];
    const val = qc[k];
    if (val === undefined || val === '') return '';
    const ok  = ref.pass(parseFloat(val));
    const bg  = i % 2 === 0 ? `style="background:var(--lg)"` : '';
    return `<tr ${bg}>
      <td class="qname">${ref.name}</td>
      <td class="qval">${val} ${ref.unit}</td>
      <td class="qref">ì°¸ì¡°: ${ref.ref}</td>
      <td class="${ok?'pass':'up'}">${ok?'PASS':'FAIL'}</td>
    </tr>`;
  }).join('');
}

function renderInterpRec(detected, cso) {
  const top1 = cso && cso[0] ? cso[0].organ : 'â€”';

  if (detected) {
    $('interp-text').textContent =
      `ë³¸ ê²€ì‚¬ì—ì„œ ${top1} ê¸°ì›ì˜ ì•” ì‹ í˜¸ê°€ ë†’ì€ ì‹ ë¢°ë„ë¡œ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. `+
      `cfDNA ë‹¨í¸í™” ë¶„ì„ì—ì„œ ë‹¨í¸ ê¸¸ì´ ë‹¨ì¶•, ë‰´í´ë ˆì˜¤ì†œ í’‹í”„ë¦°íŠ¸ ì´ìƒ, ë§ë‹¨ ì„œì—´ ëª¨í‹°í”„ í¸í–¥ì´ `+
      `ë³µí•©ì ìœ¼ë¡œ ê´€ì°°ë˜ì–´ ${top1} ì•” ê°€ëŠ¥ì„±ì´ ì‹œì‚¬ë©ë‹ˆë‹¤. í™•ì§„ì„ ìœ„í•œ ì¶”ê°€ ê²€ì‚¬ê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.`;
    $('rec-box').className = 'rec-box det';
    $('rec-title').textContent = 'ê¶Œê³  ê²€ì‚¬ ì‚¬í•­';
    const items = [
      `${top1} ê´€ë ¨ ì •ë°€ ê²€ì‚¬ (ìš°ì„  ê¶Œì¥) â€” ê°€ëŠ¥í•œ ë¹ ë¥¸ ì‹œì¼ ë‚´ ì‹œí–‰`,
      'ë³µë¶€ CT ë˜ëŠ” PET-CT â€” ì •ë°€ ê²€ì‚¬ ì •ìƒ ì‹œ ì¶”ê°€ ì˜ìƒ ê²€ì‚¬',
      'ì¢…ì–‘ í‘œì§€ì í˜ˆì•¡ê²€ì‚¬ (CEA, CA 19-9 ë“±)',
      'ì¢…ì–‘ë‚´ê³¼ ì „ë¬¸ì˜ ìƒë‹´ â€” ê²€ì‚¬ ê²°ê³¼ ì¢…í•© í•´ì„',
    ];
    $('rec-list').innerHTML = items.map(i=>`<li>${i}</li>`).join('');
  } else {
    $('interp-text').textContent =
      `ë³¸ ê²€ì‚¬ì—ì„œ íƒì§€ ëŒ€ìƒ 12ì¢… ì•”ì— ëŒ€í•œ ìœ ì˜ë¯¸í•œ ì•” ì‹ í˜¸ê°€ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. `+
      `cfDNA ë‹¨í¸í™” í”„ë¡œíŒŒì¼(ë‹¨í¸ ê¸¸ì´, ë‰´í´ë ˆì˜¤ì†œ í’‹í”„ë¦°íŠ¸, ë§ë‹¨ ëª¨í‹°í”„) ëª¨ë‘ ì •ìƒ ë²”ìœ„ ë‚´ì…ë‹ˆë‹¤. `+
      `ë‹¨, ìŒì„± ê²°ê³¼ê°€ ì•”ì˜ ì™„ì „í•œ ë¶€ì¬ë¥¼ ë³´ì¥í•˜ì§€ëŠ” ì•Šìœ¼ë¯€ë¡œ ì •ê¸° ê²€ì§„ì„ ì§€ì†í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.`;
    $('rec-box').className = 'rec-box neg';
    $('rec-title').textContent = 'ê¶Œê³  ì‚¬í•­';
    const items = [
      'êµ­ê°€ ì•” ê²€ì§„ í”„ë¡œê·¸ë¨ ì •ê¸° ì°¸ì—¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.',
      '12ê°œì›” í›„ AiMA C12 ì¬ê²€ì„ ê¶Œì¥í•©ë‹ˆë‹¤.',
      'ì´ìƒ ì¦ìƒ ë°œìƒ ì‹œ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹­ì‹œì˜¤.',
    ];
    $('rec-list').innerHTML = items.map(i=>`<li>${i}</li>`).join('');
  }
}

function render(d) {
  // Â§1 Patient Info
  set('pt-id',   d.patientId);
  set('pt-name', d.patientName);
  set('pt-dob',  `${d.birthDate} (ë§Œ ${d.age}ì„¸)`);
  set('pt-sex',  d.gender);
  set('pt-inst', d.institution);
  set('pt-doc',  d.doctor);
  set('pt-col',  d.collectionDate);
  set('pt-rep',  d.reportDate);

  // Â§2 Hero
  const hero = $('hero');
  const pct  = Math.round(d.score * 100);
  if (d.detected) {
    hero.className = 'hero det';
    set('hero-h2', 'ì•” ì‹ í˜¸ ê°ì§€ë¨');
    set('hero-h3', 'CANCER SIGNAL DETECTED');
    set('hero-p1', `ì¶”ì • ê¸°ì› ì¥ê¸°:  ${d.cso && d.cso[0] ? d.cso[0].organ : 'â€”'}`);
    set('hero-p2', 'ì¶”ê°€ í™•ì¸ ê²€ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë‹´ë‹¹ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹­ì‹œì˜¤.');
    set('score-note', `ì„ê³„ê°’: 0.50 | ì‹ ë¢°ë„: 95% CI [${d.ciLow}â€“${d.ciHigh}]`);
  } else {
    hero.className = 'hero neg';
    set('hero-h2', 'ì•” ì‹ í˜¸ ë¯¸ê°ì§€');
    set('hero-h3', 'NO CANCER SIGNAL DETECTED');
    set('hero-p1', 'ë³¸ ê²€ì‚¬ì—ì„œ 12ì¢… ì•”ì— ëŒ€í•œ ì•” ì‹ í˜¸ê°€ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    set('hero-p2', 'ì •ê¸°ì ì¸ ê±´ê°•ê²€ì§„ ë° êµ­ê°€ ì•” ê²€ì§„ì„ ì§€ì†ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.');
    set('score-note', `ì„ê³„ê°’: 0.50 | ì¸¡ì •ê°’: ${d.score}`);
  }
  set('score-val', d.score.toFixed(2));
  $('score-bar').style.width = pct + '%';

  // Â§3 CSO
  renderCSO(d.cso, d.detected);

  // Â§4 C12 Grid
  const hitOrgans = d.detected && d.cso ? d.cso.map(c => c.organ) : [];
  renderC12Grid(hitOrgans);

  // Â§5 Fragmentomics
  if (d.detected) renderFragDet(d.frag);
  else             renderFragNeg(d.frag, d.score.toFixed(2));

  // Â§6 QC
  renderQC(d.qc);

  // Â§7 Interpretation & Recommendation
  renderInterpRec(d.detected, d.cso);

  // Â§10 Signatures & Meta
  set('sig-analyst',  d.sigs.analyst);
  set('sig-reader',   d.sigs.reader);
  set('sig-approver', d.sigs.approver);
  const suffix = d.detected ? 'D' : 'N';
  $('rmeta').innerHTML =
    `ë³´ê³ ì„œ ID: ${d.reportId || 'RPT-2026-C12-00000-'+suffix}<br>`+
    `ì•Œê³ ë¦¬ì¦˜: AiMA-C12 Fragmentomics v1.0 | í•™ìŠµ ì½”í˜¸íŠ¸: n=120,000<br>`+
    `ë°œí–‰ì¼ì‹œ: ${d.reportDate} KST | ì´ ë³´ê³ ì„œëŠ” ë°œí–‰ì¼ë¡œë¶€í„° 1ë…„ê°„ ìœ íš¨í•©ë‹ˆë‹¤.`;
}

// â”€â”€ Init â”€â”€
(function init() {
  const raw = localStorage.getItem('aima_c12_report');
  if (!raw) return; // show no-data div (already visible by default)
  $('no-data').style.display = 'none';
  document.querySelectorAll('.page').forEach(p => p.style.display = 'flex');
  try {
    render(JSON.parse(raw));
  } catch(e) {
    alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
  }
})();
</script>
</body>
</html>
